<form class="{{cssClass}} flexcol" autocomplete="off">

    {{log this}}

    {{!-- Sheet Header --}}
    <header class="sheet-header flexrow">
        <div class="image-container">
            <img class="profile" src="{{actor.img}}" title="{{actor.name}}" data-edit="img" height="180" width="180" />
            <a class="hover-icon" data-action="show-image"><i class="fas fa-image fa-fw"></i></a>
        </div>

        <div class="header-details flexrow">
            <div class="header-background flexrow">
                <h1 class="charname" data-tooltip="{{localize "SFRPG.MechNameLabel"}}">
                    <input name="name" type="text" value="{{actor.name}}" placeholder="{{localize "SFRPG.MechNameLabel"}}" />
                </h1>

                <div class="charlevel"  data-tooltip="{{localize "SFRPG.MechTierLabel"}}<br />@details.tier" >
                    <div class="level noxp">
                        <label>{{localize "SFRPG.MechTierLabel"}} </label>
                        <input name="system.details.tier" type="text" value="{{labels.tier}}" placeholder="1" />
                    </div>
                </div>
            </div>

            <ul class="summary">
                <li data-tooltip="{{localize "SFRPG.MechModelLabel"}}<br />@details.model">
                    <input type="text" name="system.details.model" value="{{system.details.model}}" placeholder="{{localize "SFRPG.MechModelLabel"}}" />
                </li>
                <li data-tooltip="{{localize "SFRPG.MechFrameLabel"}}<br />@details.frame">
                    {{#if activeFrame}}<span>{{activeFrame.name}}</span>{{else}}<span class="no-frame">{{localize "SFRPG.MechSheet.Header.FrameMissing"}}</span>{{/if}}
                </li>
                <li data-tooltip="{{ localize "SFRPG.Size"}}<br />@traits.size">
                    <span>{{localize "SFRPG.MechSheet.Header.Size" size=system.traits.size}}</span>
                </li>
            </ul>


            <ul class="attributes flexrow">
                {{!-- Hit Points --}}
                <li class="attribute health" data-tooltip="Hit Points<br />@attributes.hp.value<br />@attributes.hp.max">
                    <h4 class="attribute-name box-title">Hit Points</h4>
                    <div class="attribute-value multiple">
                        <input name="system.attributes.hp.value" type="text" value="{{system.attributes.hp.value}}"
                            data-dtype="Number" placeholder="10" />
                        <span class="sep"> / </span>
                        <label>{{system.attributes.hp.max}}</label>
                    </div>
                </li>

                {{!-- Shield Points --}}
                <li class="attribute health" data-tooltip="Shield Points<br />@attributes.sp.value<br />@attributes.sp.max<br><br>{{#each system.attributes.sp.tooltip as |tip|}}{{tip}}<br/>{{/each}}">
                    <h4 class="attribute-name box-title">Shield Points</h4>
                    <div class="attribute-value multiple">
                        <input name="system.attributes.sp.value" type="text" value="{{system.attributes.sp.value}}"
                            data-dtype="Number" placeholder="10" />
                        <span class="sep"> / </span>
                        <label>{{system.attributes.sp.max}}</label>
                    </div>
                </li>

                <li class="attribute">
                    <h4 class="attribute-name box-title">{{localize "SFRPG.MechSheet.Header.ACs"}}</h4>
                    <ol class="attribute-multibox">
                        {{!-- Energy Armor Class (EAC) --}}
                        <li class="flexrow" data-tooltip="{{localize "SFRPG.EnergyArmorClass"}}<br/>@attributes.eac.value<br/><br/>{{#each system.attributes.eac.tooltip as |tip|}}{{tip}}<br/>{{/each}}">
                            <label>{{localize "SFRPG.EnergyArmorClass"}}</label>
                            <label>{{system.attributes.eac.value}}</label>
                        </li>
                        {{!-- Kinetic Armor Class (KAC) --}}
                        <li class="flexrow" data-tooltip="{{localize "SFRPG.KineticArmorClass"}}<br/>@attributes.kac.value<br/><br/>{{#each system.attributes.kac.tooltip as |tip|}}{{tip}}<br/>{{/each}}">
                            <label>{{localize "SFRPG.KineticArmorClass"}}</label>
                            <label>{{system.attributes.kac.value}}</label>
                        </li>
                        {{!-- Hardness --}}
                        <li class="flexrow" data-tooltip="{{localize "Hardness"}}<br />@attributes.hardness.value<br/><br/>{{#each system.attributes.hardness.tooltip as |tip|}}{{tip}}<br/>{{/each}}">
                            <label>{{localize "Hardness"}}</label>
                            <label>{{system.attributes.hardness.value}}</label>
                        </li>
                    </ol>
                </li>

                {{> "systems/sfrpg/templates/actors/parts/actor-movement-element.hbs"}}
               
            </ul>

        </div>
    </header>

    {{!-- Sheet Navigation --}}
    <nav class="sheet-navigation tabs" data-group="primary">
        <a class="item active" data-tab="details">{{ localize "SFRPG.Details" }}</a>
        <a class="item" data-tab="features">{{ localize "SFRPG.Tabs.Features" }}</a>
        <a class="item" data-tab="operators">{{ localize "SFRPG.Tabs.Operators" }}</a>
        <a class="item" data-tab="ppAbilities">{{ localize "SFRPG.MechSheet.PPAbility.PPAbilities" }}</a>
        <a class="item" data-tab="modifiers">{{localize "SFRPG.Modifiers"}}</a>
    </nav>

    {{!-- PC Sheet Body --}}
    <section class="sheet-body">
        {{!-- Main Details Tab --}}
        <div class="tab details" data-group="primary" data-tab="main">
            <img class="silhouette" src="systems/sfrpg/images/backgrounds/noun-robot-37319.svg" title="Mech Silhouette" height="240"/>

            <div class="flexcol">
                <h3 class="form-header noborder">{{ localize "SFRPG.Attributes"}}</h3>
                <ul class="attributes flexrow">
                    <li class="attribute" data-tooltip="{{ localize "SFRPG.MechSheet.Attributes.Operators" }}<br />@attributes.operators.min<br />@attributes.operators.max">
                        <h4 class="attribute-name box-title">{{ localize "SFRPG.MechSheet.Attributes.Operators" }}</h4>
                        <div class="attribute-value multiple">
                            <span data-tooltip="{{ localize "SFRPG.MechSheet.Attributes.OperatorsMin" }}">{{system.attributes.operators.min}}</span>
                            <span class="sep"> / </span>
                            <span data-tooltip="{{ localize "SFRPG.MechSheet.Attributes.OperatorsMax" }}">{{system.attributes.operators.max}}</span>
                        </div>
                    </li>

                    <li class="attribute save" data-tooltip="<strong>{{localize "SFRPG.FortitudeSave"}}</strong><br>@attributes.fort.bonus<br><br>{{#each system.attributes.fort.tooltip as |tip|}}{{tip}}<br>{{/each}}" data-save="fort">
                        <h4 class="attribute-name save-name box-title rollable">{{localize "SFRPG.FortitudeSave"}}</h4>
                        <div class="attribute-value">
                            <span>{{numberFormat system.attributes.fort.bonus decimals=0 sign=true}}</span>
                        </div>
                        <footer class="attribute-footer">
                            <div>
                                <span>{{localize "SFRPG.SaveMiscModifierLabel"}}</span>
                                <input name="system.attributes.fort.misc" type="text" placeholder="0" data-dtype="Number"
                                    value="{{numberFormat system.attributes.fort.misc decimals=0 sign=true}}" />
                            </div>
                        </footer>
                    </li>

                    <li class="attribute save" data-tooltip="<strong>{{localize "SFRPG.ReflexSave"}}</strong><br>@attributes.reflex.bonus<br><br>{{#each system.attributes.reflex.tooltip as |tip|}}{{tip}}<br>{{/each}}" data-save="reflex">
                        <h4 class="attribute-name save-name box-title rollable">{{localize "SFRPG.ReflexSave"}}</h4>
                        <div class="attribute-value">
                            <span>{{numberFormat system.attributes.reflex.bonus decimals=0 sign=true}}</span>
                        </div>
                        <footer class="attribute-footer">
                            <div>
                                <span>{{localize "SFRPG.SaveMiscModifierLabel"}}</span>
                                <input name="system.attributes.reflex.misc" type="text" placeholder="0"
                                    data-dtype="Number"
                                    value="{{numberFormat system.attributes.reflex.misc decimals=0 sign=true}}" />
                            </div>
                        </footer>
                    </li>
                </ul>
            </div>

             <div class="flexcol traits">
                <h3 class="form-header noborder">{{localize "SFRPG.MechSheet.Damage.Header"}}</h3>
                <div class="flexrow">
                    <div class="flexcol">
                        <div class="form-group">
                            <label for="system.attributes.systems.cockpit.value">{{localize "SFRPG.MechSheet.Damage.Systems.Cockpit"}} <a class="critical-edit" data-system="cockpit" title="{{localize "SFRPG.MechSheet.Damage.Edit"}}"><i class="fas fa-edit"></i></a></label>
                            <select name="system.attributes.systems.cockpit.value">
                                {{#select system.attributes.systems.cockpit.value}}
                                {{#each config.mechSystemStatus as |status statusKey|}}
                                <option value="{{statusKey}}">{{status}}</option>
                                {{/each}}
                                {{/select}}
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="system.attributes.systems.frame.value">{{localize "SFRPG.MechSheet.Damage.Systems.Frame"}} <a class="critical-edit" data-system="frame" title="{{localize "SFRPG.MechSheet.Damage.Edit"}}"><i class="fas fa-edit"></i></a></label>
                            <select name="system.attributes.systems.frame.value">
                                {{#select system.attributes.systems.frame.value}}
                                {{#each config.mechSystemStatus as |status statusKey|}}
                                <option value="{{statusKey}}">{{status}}</option>
                                {{/each}}
                                {{/select}}
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="system.attributes.systems.powerCore.value">{{localize "SFRPG.MechSheet.Damage.Systems.PowerCore"}} <a class="critical-edit" data-system="powerCore" title="{{localize "SFRPG.MechSheet.Damage.Edit"}}"><i class="fas fa-edit"></i></a></label>
                            <select name="system.attributes.systems.powerCore.value">
                                {{#select system.attributes.systems.powerCOre.value}}
                                {{#each config.mechSystemStatus as |status statusKey|}}
                                <option value="{{statusKey}}">{{status}}</option>
                                {{/each}}
                                {{/select}}
                            </select>
                        </div>
                    </div>
                    <div class="flexcol">
                        <div class="form-group">
                            <label for="system.attributes.systems.upperLimbs.value">{{localize "SFRPG.MechSheet.Damage.Systems.UpperLimbs"}} <a class="critical-edit" data-system="upperLimbs" title="{{localize "SFRPG.MechSheet.Damage.Edit"}}"><i class="fas fa-edit"></i></a></label>
                            <select name="system.attributes.systems.upperLimbs.value">
                                {{#select system.attributes.systems.upperLimbs.value}}
                                {{#each config.mechSystemStatus as |status statusKey|}}
                                <option value="{{statusKey}}">{{status}}</option>
                                {{/each}}
                                {{/select}}
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="system.attributes.systems.lowerLimbs.value">{{localize "SFRPG.MechSheet.Damage.Systems.LowerLimbs"}} <a class="critical-edit" data-system="lowerLimbs" title="{{localize "SFRPG.MechSheet.Damage.Edit"}}"><i class="fas fa-edit"></i></a></label>
                            <select name="system.attributes.systems.lowerLimbs.value">
                                {{#select system.attributes.systems.lowerLimbs.value}}
                                {{#each config.mechSystemStatus as |status statusKey|}}
                                <option value="{{statusKey}}">{{status}}</option>
                                {{/each}}
                                {{/select}}
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="system.attributes.systems.auxiliarySystems.value">{{localize "SFRPG.MechSheet.Damage.Systems.AuxiliarySystems"}} <a class="critical-edit" data-system="auxiliarySystems" title="{{localize "SFRPG.MechSheet.Damage.Edit"}}"><i class="fas fa-edit"></i></a></label>
                            <select name="system.attributes.systems.auxiliarySystems.value">
                                {{#select system.attributes.systems.auxiliarySystems.value}}
                                {{#each config.mechSystemStatus as |status statusKey|}}
                                <option value="{{statusKey}}">{{status}}</option>
                                {{/each}}
                                {{/select}}
                            </select>
                        </div>
                   </div>
                </div>
            </div>
       </div>

        {{!-- Features Tab --}}
        <div class="tab features flexrow" data-group="primary" data-tab="features">
            {{> "systems/sfrpg/templates/actors/parts/actor-features.hbs" sections=features noFilters=true prefixTable=prefixTable}}
        </div>

        {{!-- Operators Tab --}}
        <div class="tab operators flexcol" data-group="primary" data-tab="Operators">
            <div class="operators-settings flexrow">
                <ol class="settings flexrow">
                    <h4 class="attribute-name box-title">
                        {{localize "SFRPG.MechSheet.Operators.Header"}}
                        <i class="fas fa-users"></i>
                    </h4>
                </ol>
            </div>

            <ol class="crew-list">
                {{#each crew as |role|}}
                <li class="flexrow crew-header {{role.cssClass}}" {{#each role.dataset as |v k|}}data-{{k}}="{{v}}"{{/each}}>{{role.label}}</li>
                <ol class="crew-item-list">
                    {{#each role.actors as |actor a|}}
                    <li class="crew flexrow draggable" data-actor-id="{{actor.id}}">
                        <div class="crew-name flexrow">
                            <div class="crew-image" style="background-image: url({{actor.img}})"></div>
                            <a class="crew-view"><h4>{{actor.name}}</h4></a>
                        </div>
                        <div class="crew-controls">
                            <a class="crew-control crew-delete" title="{{localize "SFRPG.MechSheet.Operators.RemoveCrewMember"}}"><i class="fas fa-trash"></i></a>
                        </div>
                    </li>
                    {{/each}}
                </ol>
                {{/each}}
            </ol>
        </div>

        {{!-- PPAbilities Tab --}}
        <div class="tab ppAbilities flexcol" data-group="primary" data-tab="ppAbilities">
            Power Point Abilities
            <ol class="action-list">
                {{#each actions as |role|}}
                <li class="action flexrow action-header">
                    <div class="action-name">{{localize role.label}}</div>
                    <div class="action-ppcost">{{localize "SFRPG.MechSheet.Actions.Header.PPCost"}}</div>
                    <div class="action-type">{{localize "SFRPG.MechSheet.Actions.Header.Type"}}</div>
                </li>
                <ol class="action-list">
                    {{#each role.actions as |action|}}
                    <li class="action flexrow small" data-action-id="{{action.id}}">
                        <div class="action-name flexrow rollable" id="{{action.id}}" data-tooltip="<strong>{{localize action.name}}</strong><br/>{{localize "SFRPG.MechSheet.Actions.Tooltips.NormalEffect"}}:<br/>{{localize action.system.effectNormal}}">
                            <div class="action-image small" style="background-image: url({{action.img}})"></div>
                            <h4>{{localize action.name}}</h4>
                        </div>
                        <div class="action-ppcost flexrow" data-tooltip="<strong>{{localize action.system.ppCost.name}}</strong><br/>{{localize action.system.ppCost.tooltip}}<br/><br/>">{{#if (greaterThan action.system.ppCost 0)}}{{action.system.ppCost}}{{/if}}</div>
                        <div class="action-type flexrow">{{localize action.system.type}}
                        </div>
                    </li>
                    {{/each}}
                </ol>
                {{/each}}
            </ol>
        </div>

        {{!-- Modifiers Tab --}}
        <div class="tab modifers flexcol" data-group="primary" data-tab="modifiers">
            {{> "systems/sfrpg/templates/actors/parts/actor-modifiers.hbs" sections=modifiers}}
        </div>
    </section>
</form>